version: 2

models:
  - name: fct_sales
    description: >
      Adventure Works sales fact table.
      This table cointains metrics and information about sales in ADW.
      Its smaller granularity is a line of an order.
      There is also credit card and sales reason information.

    columns:
      
      - name: pk_order_detail
        description: Primary key for the fact sales table. Indicates each line of an order.
        tests:
          - unique
          - not_null

      - name: fk_customer
        description: Foreign key for the customer dimension.

      - name: fk_territory
        description: Foreign key for the territory dimension.

      - name: fk_product
        description: Foreign key for the product dimension.
      
      - name: fk_order
        description: Foreign key for the order. This can be used for aggregations.

      - name: dt_order
        description: Date the sales order was created.

      - name: status
        description: >
          Order current status. 
          Can assume one of the following values: 
            In process, Approved, Backordered, Rejected, Shipped, Cancelled

      - name: card_type
        description: Credit card name.

      - name: reason_name
        description: Sales reason description.

      - name: unit_price
        description: Selling price of a single product.

      - name: discount
        description: Discount percent applied to the unit_price.

      - name: quantity
        description: Quantity ordered per product.

      - name: gross_sales
        description: Per product subtotal. Computed as unit_price * quantity.

      - name: net_sales
        description: Per product subtotal. Computed as unit_price * (1 - discount) * quantity.

      - name: total_sales
        description: >
         Total due from customer.
         Computed as net_total_sold + prorated_taxes + prorated_freight.

      - name: ticket
        description: >
          Mean value made in a purchase.
          Calculated as sum of net_total_sold divided by number of lines in an order.
      
      - name: discount_category
        description: Categorization of how much discount the order had.